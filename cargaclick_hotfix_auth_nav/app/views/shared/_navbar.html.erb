<nav class="bg-gradient-to-r from-purple-900 to-purple-700 p-4 shadow-lg sticky top-0 w-full z-50">
  <div class="max-w-7xl mx-auto flex items-center justify-between gap-4">

    <!-- Logo -->
    <%= link_to root_path, class: "flex items-center gap-2 text-white text-2xl font-extrabold tracking-wide hover:text-purple-200 transition" do %>
      <span>CargaClick</span>
    <% end %>

    <!-- Links (desktop) -->
    <div class="hidden md:flex items-center gap-2">
      <% if respond_to?(:new_frete_path) %>
        <%= link_to "Simular frete", new_frete_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <% if respond_to?(:fretes_path) %>
        <%= link_to "Fretes", fretes_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <% if respond_to?(:clientes_path) %>
        <%= link_to "Clientes", clientes_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <% if respond_to?(:transportadores_path) %>
        <%= link_to "Transportadores", transportadores_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>
    </div>

    <!-- Auth buttons (desktop) -->
    <div class="hidden md:flex items-center gap-2">
      <% if respond_to?(:admin_signed_in?, true) && admin_signed_in? %>
        <span class="text-white/90 text-sm">Admin</span>
        <% if respond_to?(:destroy_admin_session_path) %>
          <%= button_to "Sair", destroy_admin_session_path, method: :delete,
                class: "px-3 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition" %>
        <% end %>

      <% elsif respond_to?(:transportador_signed_in?, true) && transportador_signed_in? %>
        <span class="text-white/90 text-sm">Transportador</span>
        <% if respond_to?(:destroy_transportador_session_path) %>
          <%= button_to "Sair", destroy_transportador_session_path, method: :delete,
                class: "px-3 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition" %>
        <% end %>

      <% elsif respond_to?(:cliente_signed_in?, true) && cliente_signed_in? %>
        <span class="text-white/90 text-sm">Cliente</span>
        <% if respond_to?(:destroy_cliente_session_path) %>
          <%= button_to "Sair", destroy_cliente_session_path, method: :delete,
                class: "px-3 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition" %>
        <% end %>

      <% else %>
        <!-- Sem login -->
        <% if respond_to?(:new_cliente_session_path) %>
          <%= link_to "Entrar", new_cliente_session_path,
                class: "px-3 py-2 rounded-lg bg-white text-purple-800 font-semibold hover:bg-purple-50 transition" %>
        <% elsif respond_to?(:new_user_session_path) %>
          <%= link_to "Entrar", new_user_session_path,
                class: "px-3 py-2 rounded-lg bg-white text-purple-800 font-semibold hover:bg-purple-50 transition" %>
        <% end %>

        <% if respond_to?(:new_cliente_registration_path) %>
          <%= link_to "Cadastrar", new_cliente_registration_path,
                class: "px-3 py-2 rounded-lg bg-black/20 text-white font-semibold hover:bg-black/30 transition" %>
        <% elsif respond_to?(:new_user_registration_path) %>
          <%= link_to "Cadastrar", new_user_registration_path,
                class: "px-3 py-2 rounded-lg bg-black/20 text-white font-semibold hover:bg-black/30 transition" %>
        <% end %>
      <% end %>
    </div>

    <!-- Mobile menu button -->
    <button
      type="button"
      class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg bg-white/10 hover:bg-white/20 transition text-white"
      onclick="document.getElementById('mobileMenu').classList.toggle('hidden')"
      aria-label="Abrir menu"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
  </div>

  <!-- Links (mobile) -->
  <div id="mobileMenu" class="md:hidden hidden mt-3">
    <div class="max-w-7xl mx-auto flex flex-col gap-2">
      <% if respond_to?(:new_frete_path) %>
        <%= link_to "Simular frete", new_frete_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <% if respond_to?(:fretes_path) %>
        <%= link_to "Fretes", fretes_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <% if respond_to?(:clientes_path) %>
        <%= link_to "Clientes", clientes_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <% if respond_to?(:transportadores_path) %>
        <%= link_to "Transportadores", transportadores_path, class: "px-3 py-2 rounded-lg text-white/90 hover:text-white hover:bg-white/10 transition" %>
      <% end %>

      <div class="h-px bg-white/15 my-2"></div>

      <% if respond_to?(:admin_signed_in?, true) && admin_signed_in? %>
        <% if respond_to?(:destroy_admin_session_path) %>
          <%= button_to "Sair (Admin)", destroy_admin_session_path, method: :delete,
                class: "w-full text-left px-3 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition" %>
        <% end %>

      <% elsif respond_to?(:transportador_signed_in?, true) && transportador_signed_in? %>
        <% if respond_to?(:destroy_transportador_session_path) %>
          <%= button_to "Sair (Transportador)", destroy_transportador_session_path, method: :delete,
                class: "w-full text-left px-3 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition" %>
        <% end %>

      <% elsif respond_to?(:cliente_signed_in?, true) && cliente_signed_in? %>
        <% if respond_to?(:destroy_cliente_session_path) %>
          <%= button_to "Sair (Cliente)", destroy_cliente_session_path, method: :delete,
                class: "w-full text-left px-3 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition" %>
        <% end %>

      <% else %>
        <% if respond_to?(:new_cliente_session_path) %>
          <%= link_to "Entrar", new_cliente_session_path,
                class: "px-3 py-2 rounded-lg bg-white text-purple-800 font-semibold hover:bg-purple-50 transition" %>
        <% elsif respond_to?(:new_user_session_path) %>
          <%= link_to "Entrar", new_user_session_path,
                class: "px-3 py-2 rounded-lg bg-white text-purple-800 font-semibold hover:bg-purple-50 transition" %>
        <% end %>

        <% if respond_to?(:new_cliente_registration_path) %>
          <%= link_to "Cadastrar", new_cliente_registration_path,
                class: "px-3 py-2 rounded-lg bg-black/20 text-white font-semibold hover:bg-black/30 transition" %>
        <% elsif respond_to?(:new_user_registration_path) %>
          <%= link_to "Cadastrar", new_user_registration_path,
                class: "px-3 py-2 rounded-lg bg-black/20 text-white font-semibold hover:bg-black/30 transition" %>
        <% end %>
      <% end %>
    </div>
  </div>
</nav>
