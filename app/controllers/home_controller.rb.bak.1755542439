# app/controllers/home_controller.rb
class HomeController < ApplicationController
  # Lista Ãºnica e imutÃ¡vel de modais
  MODAIS = [
    { nome: 'CaminhÃ£o',    emoji: 'ðŸšš' },
    { nome: 'Bike',        emoji: 'ðŸš´â€â™‚ï¸' },
    { nome: 'Moto',        emoji: 'ðŸ›µ' },
    { nome: 'A pÃ©',        emoji: 'ðŸ¦¶' },
    { nome: 'Patinete',    emoji: 'ðŸ›´' },
    { nome: 'Barco',       emoji: 'ðŸš¤' },
    { nome: 'HelicÃ³ptero', emoji: 'ðŸš' },
    { nome: 'Tartaruga',   emoji: 'ðŸ¢' }
  ].map(&:freeze).freeze

  def index
    # SÃ³ define cache se estiver habilitado (evita problemas em dev/test)
    expires_in 5.minutes, public: true if perform_caching

    @modais = MODAIS
    @modal_sorteado = pick_modal

    respond_to do |format|
      format.html
      format.json { render json: { modais: @modais, sorteado: @modal_sorteado } }
    end
  end

  private

  def pick_modal
    MODAIS.sample || { nome: 'CaminhÃ£o', emoji: 'ðŸšš' }
  end
end

