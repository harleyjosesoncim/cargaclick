<%= turbo_stream.replace dom_id(@pagamento, :status) do %>
  <div id="<%= dom_id(@pagamento, :status) %>">
    <span class="inline-block px-2 py-1 rounded text-xs font-bold
      <%= case @pagamento.status
          when "confirmado" then "bg-green-200 text-green-800"
          when "pendente"   then "bg-yellow-200 text-yellow-800"
          when "cancelado"  then "bg-red-200 text-red-800"
          else "bg-gray-200 text-gray-800" end %>">
      <%= @pagamento.status_label %>
    </span>

    <!-- BotÃµes -->
    <div class="mt-3 flex flex-wrap gap-2">
      <% if @pagamento.pendente? %>
        <%= button_to "Confirmar",
            pagamento_path(@pagamento, status: "confirmado"),
            method: :patch,
            data: { turbo_stream: true },
            class: "px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm" %>

        <%= button_to "Cancelar",
            pagamento_path(@pagamento, status: "cancelado"),
            method: :patch,
            data: { turbo_stream: true, confirm: "Deseja realmente cancelar este pagamento?" },
            class: "px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm" %>
      <% else %>
        <span class="text-sm text-gray-500 italic">Pagamento encerrado</span>
      <% end %>

      <%= link_to "Visualizar",
          pagamento_path(@pagamento),
          class: "px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" %>
    </div>
  </div>
<% end %>
