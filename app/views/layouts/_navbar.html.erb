<!-- app/views/layouts/_navbar.html.erb -->
<nav x-data="{ open: false }" class="bg-purple-800 p-4 shadow-lg fixed top-0 left-0 w-full z-50">
  <div class="container mx-auto flex items-center justify-between">
    <!-- Logo -->
    <%= link_to root_path, class: "text-white text-2xl font-bold flex items-center hover:text-purple-200 transition" do %>
      CargaClick <span class="ml-2 text-lg">🚚</span>
    <% end %>

    <!-- Links Desktop -->
    <ul class="hidden md:flex space-x-6 font-medium text-white">
      <li><%= link_to "Simular Frete", calcular_fretes_path, class: "hover:text-yellow-300 transition" %></li>
      <li><%= link_to "Fidelidade", fidelidade_path, class: "hover:text-yellow-300 transition" %></li>
      <li><%= link_to "Relatórios", relatorios_path, class: "hover:text-yellow-300 transition" %></li>
      <li><%= link_to "Sobre", about_path, class: "hover:text-yellow-300 transition" %></li>
      <li><%= link_to "Contato", contato_path, class: "hover:text-yellow-300 transition" %></li>
    </ul>

    <!-- Botões Desktop -->
    <ul class="hidden md:flex space-x-4 items-center">
      <!-- Cliente -->
      <% if current_cliente %>
        <li>
          <%= link_to "Área do Cliente",
                      cliente_path(current_cliente),
                      class: "bg-white text-purple-800 font-bold py-2 px-4 rounded-full hover:bg-gray-200 transition" %>
        </li>
      <% else %>
        <li>
          <%= link_to "Login Cliente",
                      new_cliente_session_path,
                      class: "bg-white text-purple-800 font-bold py-2 px-4 rounded-full hover:bg-gray-200 transition" %>
        </li>
      <% end %>

      <!-- Transportador -->
      <% if current_transportador %>
        <li>
          <%= link_to "Área do Transportador",
                      transportador_path(current_transportador),
                      class: "bg-purple-600 text-white font-bold py-2 px-4 rounded-full hover:bg-purple-500 transition" %>
        </li>
      <% else %>
        <li>
          <%= link_to "Login Transportador",
                      new_transportador_session_path,
                      class: "bg-purple-600 text-white font-bold py-2 px-4 rounded-full hover:bg-purple-500 transition" %>
        </li>
      <% end %>
    </ul>

    <!-- Botão Hamburguer Mobile -->
    <div class="md:hidden">
      <button @click="open = !open" class="text-white focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <!-- Ícone hamburguer -->
          <path :class="{'hidden': open, 'inline-flex': !open}" class="inline-flex"
            stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"/>
          <!-- Ícone X -->
          <path :class="{'hidden': !open, 'inline-flex': open}" class="hidden"
            stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Menu Mobile -->
  <div x-show="open"
       x-transition:enter="transition ease-out duration-200"
       x-transition:enter-start="opacity-0 -translate-y-2"
       x-transition:enter-end="opacity-100 translate-y-0"
       x-transition:leave="transition ease-in duration-150"
       x-transition:leave-start="opacity-100 translate-y-0"
       x-transition:leave-end="opacity-0 -translate-y-2"
       class="md:hidden mt-4 space-y-2 bg-purple-700 rounded-lg p-4 shadow-lg">

    <%= link_to "Simular Frete", calcular_fretes_path, class: "block text-white hover:text-yellow-300" %>
    <%= link_to "Fidelidade", fidelidade_path, class: "block text-white hover:text-yellow-300" %>
    <%= link_to "Relatórios", relatorios_path, class: "block text-white hover:text-yellow-300" %>
    <%= link_to "Sobre", about_path, class: "block text-white hover:text-yellow-300" %>
    <%= link_to "Contato", contato_path, class: "block text-white hover:text-yellow-300" %>

    <!-- Cliente -->
    <% if current_cliente %>
      <%= link_to "Área do Cliente",
                  cliente_path(current_cliente),
                  class: "block bg-white text-purple-800 font-bold py-2 px-4 rounded-lg mt-2" %>
    <% else %>
      <%= link_to "Login Cliente",
                  new_cliente_session_path,
                  class: "block bg-white text-purple-800 font-bold py-2 px-4 rounded-lg mt-2" %>
    <% end %>

    <!-- Transportador -->
    <% if current_transportador %>
      <%= link_to "Área do Transportador",
                  transportador_path(current_transportador),
                  class: "block bg-purple-600 text-white font-bold py-2 px-4 rounded-lg mt-2" %>
    <% else %>
      <%= link_to "Login Transportador",
                  new_transportador_session_path,
                  class: "block bg-purple-600 text-white font-bold py-2 px-4 rounded-lg mt-2" %>
    <% end %>
  </div>
</nav>
