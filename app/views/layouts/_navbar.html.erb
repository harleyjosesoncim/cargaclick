<nav
  class="bg-gradient-to-r from-purple-950 via-purple-800 to-purple-700
         p-4 shadow-2xl fixed top-0 left-0 w-full z-50 backdrop-blur">

  <div class="max-w-7xl mx-auto flex items-center justify-between">

    <!-- LOGO -->
    <%= link_to root_path,
      class: "flex items-center gap-3 text-white text-2xl font-extrabold
              tracking-wide hover:opacity-90 transition" do %>
      <span class="text-3xl drop-shadow">ğŸšš</span>
      <span class="flex flex-col leading-tight">
        <span>CargaClick</span>
        <span class="text-xs font-normal text-purple-200 tracking-wide">
          transporte inteligente
        </span>
      </span>
    <% end %>

    <!-- DESKTOP -->
    <div class="hidden md:flex items-center gap-6 text-white font-medium">

      <% if Rails.application.routes.url_helpers.respond_to?(:simular_frete_path) %>
        <%= link_to simular_frete_path,
          class: "px-3 py-2 rounded-lg hover:bg-white/10 hover:text-yellow-300 transition" do %>
          ğŸ§® Simular Frete
        <% end %>
      <% end %>

      <% if Rails.application.routes.url_helpers.respond_to?(:fidelidade_path) %>
        <%= link_to fidelidade_path,
          class: "px-3 py-2 rounded-lg hover:bg-white/10 hover:text-yellow-300 transition" do %>
          â­ Fidelidade
        <% end %>
      <% end %>

      <% if Rails.application.routes.url_helpers.respond_to?(:contato_path) %>
        <%= link_to contato_path,
          class: "px-3 py-2 rounded-lg hover:bg-white/10 hover:text-yellow-300 transition" do %>
          ğŸ“ Contato
        <% end %>
      <% end %>

      <!-- NÃƒO LOGADO -->
      <% unless (defined?(cliente_signed_in?) && cliente_signed_in?) ||
               (defined?(transportador_signed_in?) && transportador_signed_in?) %>

        <% if Rails.application.routes.url_helpers.respond_to?(:new_transportador_registration_path) %>
          <%= link_to "Sou transportador",
            new_transportador_registration_path,
            class: "border border-yellow-300 text-yellow-300
                    px-4 py-2 rounded-full font-bold
                    hover:bg-yellow-300 hover:text-purple-900
                    transition shadow" %>
        <% end %>

        <% if Rails.application.routes.url_helpers.respond_to?(:new_cliente_registration_path) %>
          <%= link_to "Criar conta",
            new_cliente_registration_path,
            class: "bg-white text-purple-800 px-5 py-2 rounded-full font-bold
                    hover:bg-purple-100 shadow transition" %>
        <% end %>

        <% if Rails.application.routes.url_helpers.respond_to?(:new_cliente_session_path) %>
          <%= link_to "Entrar",
            new_cliente_session_path,
            class: "border border-white/40 px-5 py-2 rounded-full font-semibold
                    hover:bg-white hover:text-purple-800 shadow transition" %>
        <% end %>

      <% end %>

      <!-- CLIENTE -->
      <% if defined?(cliente_signed_in?) && cliente_signed_in? &&
            Rails.application.routes.url_helpers.respond_to?(:clientes_root_path) %>
        <%= link_to "Meu painel",
          clientes_root_path,
          class: "bg-blue-600/90 px-5 py-2 rounded-full font-bold
                  hover:bg-blue-500 shadow transition" %>
      <% end %>

      <!-- TRANSPORTADOR -->
      <% if defined?(transportador_signed_in?) && transportador_signed_in? &&
            Rails.application.routes.url_helpers.respond_to?(:transportadores_root_path) %>
        <%= link_to "Painel transportador",
          transportadores_root_path,
          class: "bg-green-600/90 px-5 py-2 rounded-full font-bold
                  hover:bg-green-500 shadow transition" %>
      <% end %>

    </div>

    <!-- MOBILE (HTML NATIVO) -->
    <details class="md:hidden text-white">
      <summary class="text-3xl cursor-pointer select-none">â˜°</summary>

      <div class="mt-4 flex flex-col gap-3 bg-purple-900/95
                  rounded-xl p-4 shadow-xl">

        <% if Rails.application.routes.url_helpers.respond_to?(:simular_frete_path) %>
          <%= link_to "ğŸ§® Simular Frete", simular_frete_path,
            class: "px-3 py-2 rounded hover:bg-white/10" %>
        <% end %>

        <% if Rails.application.routes.url_helpers.respond_to?(:fidelidade_path) %>
          <%= link_to "â­ Fidelidade", fidelidade_path,
            class: "px-3 py-2 rounded hover:bg-white/10" %>
        <% end %>

        <% if Rails.application.routes.url_helpers.respond_to?(:contato_path) %>
          <%= link_to "ğŸ“ Contato", contato_path,
            class: "px-3 py-2 rounded hover:bg-white/10" %>
        <% end %>

        <% unless (defined?(cliente_signed_in?) && cliente_signed_in?) ||
                 (defined?(transportador_signed_in?) && transportador_signed_in?) %>

          <% if Rails.application.routes.url_helpers.respond_to?(:new_transportador_registration_path) %>
            <%= link_to "ğŸš› Sou transportador",
              new_transportador_registration_path,
              class: "px-3 py-2 rounded bg-yellow-300 text-purple-900 font-bold" %>
          <% end %>

          <% if Rails.application.routes.url_helpers.respond_to?(:new_cliente_registration_path) %>
            <%= link_to "ğŸ“ Criar conta",
              new_cliente_registration_path,
              class: "px-3 py-2 rounded bg-white text-purple-800 font-bold" %>
          <% end %>

          <% if Rails.application.routes.url_helpers.respond_to?(:new_cliente_session_path) %>
            <%= link_to "ğŸ” Entrar",
              new_cliente_session_path,
              class: "px-3 py-2 rounded border border-white/40" %>
          <% end %>

        <% end %>

        <% if defined?(cliente_signed_in?) && cliente_signed_in? &&
              Rails.application.routes.url_helpers.respond_to?(:clientes_root_path) %>
          <%= link_to "ğŸ‘¤ Meu painel",
            clientes_root_path,
            class: "px-3 py-2 rounded bg-blue-600/90 font-bold" %>
        <% end %>

        <% if defined?(transportador_signed_in?) && transportador_signed_in? &&
              Rails.application.routes.url_helpers.respond_to?(:transportadores_root_path) %>
          <%= link_to "ğŸš› Painel transportador",
            transportadores_root_path,
            class: "px-3 py-2 rounded bg-green-600/90 font-bold" %>
        <% end %>

      </div>
    </details>

  </div>
</nav>
