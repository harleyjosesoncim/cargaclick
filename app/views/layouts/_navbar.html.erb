<nav x-data="{ open: false }"
     class="bg-gradient-to-r from-purple-950 via-purple-800 to-purple-700
            p-4 shadow-2xl fixed top-0 left-0 w-full z-50 backdrop-blur">

  <div class="max-w-7xl mx-auto flex items-center justify-between">

    <!-- Logo -->
    <%= link_to root_path,
      class: "flex items-center gap-3 text-white text-2xl font-extrabold tracking-wide
              hover:opacity-90 transition-all duration-200" do %>

      <span class="text-3xl drop-shadow">ğŸšš</span>

      <span class="flex flex-col leading-tight">
        <span>CargaClick</span>
        <span class="text-xs font-normal text-purple-200 tracking-wide">
          transporte inteligente
        </span>
      </span>

    <% end %>

    <!-- Desktop menu -->
    <div class="hidden md:flex items-center gap-6 text-white font-medium">

      <%= link_to simular_frete_path,
        class: "flex items-center gap-2 px-3 py-2 rounded-lg
                hover:bg-white/10 hover:text-yellow-300 transition-all" do %>
        ğŸ§® <span>Simular Frete</span>
      <% end %>

      <% if Rails.application.routes.url_helpers.respond_to?(:fidelidade_path) %>
        <%= link_to fidelidade_path,
          class: "flex items-center gap-2 px-3 py-2 rounded-lg
                  hover:bg-white/10 hover:text-yellow-300 transition-all" do %>
          â­ <span>Fidelidade</span>
        <% end %>
      <% end %>

      <%= link_to contato_path,
        class: "flex items-center gap-2 px-3 py-2 rounded-lg
                hover:bg-white/10 hover:text-yellow-300 transition-all" do %>
        ğŸ“ <span>Contato</span>
      <% end %>

      <!-- NÃƒO LOGADO -->
      <% unless (defined?(cliente_signed_in?) && cliente_signed_in?) ||
               (defined?(transportador_signed_in?) && transportador_signed_in?) %>

        <%= link_to "ğŸ“ Criar Conta",
            new_cliente_registration_path,
            class: "bg-white text-purple-800 px-5 py-2 rounded-full font-bold
                    hover:bg-purple-100 shadow-md transition-all duration-200" %>

        <%= link_to new_cliente_session_path,
          class: "flex items-center gap-2 border border-white/40
                  px-5 py-2 rounded-full font-semibold
                  hover:bg-white hover:text-purple-800
                  shadow-md transition-all duration-200" do %>
          ğŸ” <span>Entrar</span>
        <% end %>

      <% end %>

      <!-- CLIENTE -->
      <% if defined?(cliente_signed_in?) && cliente_signed_in? %>
        <%= link_to clientes_root_path,
          class: "flex items-center gap-2 bg-blue-600/90
                  px-5 py-2 rounded-full font-bold
                  hover:bg-blue-500 shadow-lg transition-all duration-200" do %>
          ğŸ‘¤ <span>Meu Painel</span>
        <% end %>
      <% end %>

      <!-- TRANSPORTADOR -->
      <% if defined?(transportador_signed_in?) && transportador_signed_in? %>
        <%= link_to transportadores_root_path,
          class: "flex items-center gap-2 bg-green-600/90
                  px-5 py-2 rounded-full font-bold
                  hover:bg-green-500 shadow-lg transition-all duration-200" do %>
          ğŸš› <span>Painel Transportador</span>
        <% end %>
      <% end %>

    </div>

    <!-- BOTÃƒO MOBILE -->
    <button @click="open = !open"
            class="md:hidden text-white text-3xl focus:outline-none">
      â˜°
    </button>

  </div>

  <!-- MENU MOBILE -->
  <div x-show="open"
       x-transition
       @click.outside="open = false"
       class="md:hidden bg-purple-900/95 border-t border-white/10">

    <div class="flex flex-col px-4 py-4 gap-3 text-white">

      <%= link_to "ğŸ§® Simular Frete", simular_frete_path, class: "px-3 py-2 rounded hover:bg-white/10" %>

      <% if Rails.application.routes.url_helpers.respond_to?(:fidelidade_path) %>
        <%= link_to "â­ Fidelidade", fidelidade_path, class: "px-3 py-2 rounded hover:bg-white/10" %>
      <% end %>

      <%= link_to "ğŸ“ Contato", contato_path, class: "px-3 py-2 rounded hover:bg-white/10"
