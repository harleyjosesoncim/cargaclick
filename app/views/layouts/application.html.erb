<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Tema p/ mobile (barra do navegador) -->
    <meta name="theme-color" content="#0b132b" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">

    <!-- SEO & Social -->
    <%= render_meta_tags(
          title:       content_for?(:title)       ? yield(:title)       : "CargaClick ðŸšš",
          description: content_for?(:description) ? yield(:description) : "Conectando clientes e transportadores de forma simples e eficiente.",
          image:       asset_url("cargaclick_og.png"),
          url:         request.original_url
        ) %>
    <link rel="canonical" href="<%= request.original_url %>">

    <!-- SeguranÃ§a -->
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Leaflet assets -->
    <meta name="leaflet-icon"     content="<%= asset_path('marker-icon.png') %>">
    <meta name="leaflet-icon-2x"  content="<%= asset_path('marker-icon-2x.png') %>">
    <meta name="leaflet-shadow"   content="<%= asset_path('marker-shadow.png') %>">

    <!-- Styles -->
    <%= stylesheet_link_tag "leaflet", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <!-- JS principal -->
    <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>

    <!-- Alpine.js (usado para interaÃ§Ãµes leves no mobile) -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <%= yield :head %>
  </head>

  <body class="bg-gray-100 dark:bg-gray-900 min-h-screen font-sans antialiased flex flex-col">

    <!-- HEADER / NAVBAR -->
    <header role="banner">
      <%= render "layouts/navbar" %>
    </header>

    <!-- FLASH MESSAGES -->
    <% if lookup_context.exists?("shared/flash") %>
      <section class="w-full px-4 mt-4 md:container md:mx-auto">
        <%= render "shared/flash" %>
      </section>
    <% end %>

    <!-- CONTEÃšDO PRINCIPAL -->
    <main class="flex-1 w-full px-4 pt-24 pb-8 md:container md:mx-auto">
      <%= yield %>
    </main>

    <!-- FOOTER -->
    <footer>
      <%= render "layouts/footer" %>
    </footer>

    <%= yield :body_end %>
  </body>
</html>
